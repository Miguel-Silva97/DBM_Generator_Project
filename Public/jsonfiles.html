<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
      integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
      crossorigin="anonymous"
    ></script>

    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Regna Bootstrap Template</title>
    <meta content="" name="descriptison" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Poppins:300,400,500,700"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet" />
    <link
      href="assets/vendor/font-awesome/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/venobox/venobox.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />

    <!-- =======================================================
  * Template Name: Regna - v2.0.0
  * Template URL: https://bootstrapmade.com/regna-bootstrap-onepage-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
    <script src="assets/js/sweetalert2.all.min.js"></script>
    <script>
      function load() {
        $.get("http://localhost:8081/schemas/names").done(function (data) {
          let table = document.getElementById("tableSchemas");
          data.forEach((d) => {
            let row = table.insertRow(-1);
            let cell1 = row.insertCell(-1);
            let cell2 = row.insertCell(-1);
            let cell3 = row.insertCell(-1);
            cell1.innerHTML = d;
            cell2.innerHTML =
              ' <a href="http://localhost:8081/editfile.html?name=' +
              d +
              ' " class="fa fa-pencil"> </a> ';
            let anchor = document.createElement("A");
            anchor.href = "#";
            anchor.onclick = function () {
              var xmlhttp = new XMLHttpRequest();

              xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == XMLHttpRequest.DONE) {
                  if (xmlhttp.status == 200) {
                    Swal.fire({
                      title: "Eliminado!",
                      text: "JSON Schema Eliminado Com Sucesso!",
                      icon: "success",
                      timer: 2000,
                    }).then((onfulfilled) => {
                      window.location.href =
                        "http://localhost:8081/jsonfiles.html";
                    });
                  } else if (xmlhttp.status == 401) {
                    Swal.fire({
                      title: "Erro Do Servidor!",
                      text: "Erro a Elimintar o Ficheiro",
                      icon: "error",
                      confirmButtonText: "Ok",
                      timer: 2000,
                    });
                  } else {
                    console.log(
                      "something else other than 200 or 401 was returned"
                    );
                  }
                }
              };

              xmlhttp.open("GET", "/schemas/remove/" + d, true);

              xmlhttp.send();
              xmlhttp.response;
            };
            anchor.className = "fa fa-trash";
            cell3.append(anchor);
          });
        });
      }
    </script>
  </head>

  <body onload="load()">
    <!-- ======= Header ======= -->
    <header id="header">
      <div class="container">
        <div id="logo" class="pull-left">
          <a href="#hero"><img src="assets/img/logo.png" alt="" /></a>
          <!-- Uncomment below if you prefer to use a text logo -->
          <!--<h1><a href="#hero">Regna</a></h1>-->
        </div>

        <nav id="nav-menu-container">
          <ul class="nav-menu">
            <li>
              <a href="http://localhost:8081">PÃ¡gina Inicial</a>
            </li>
            <li class="menu-active">
              <a href="http://localhost:8081/jsonfiles.html">Ficheiros JSON</a>
            </li>
            <li>
              <a href="http://localhost:8081/jsonhow.html"
                >Como Escrever/Editar JSON</a
              >
            </li>
          </ul>
        </nav>
        <!-- #nav-menu-container -->
      </div>
    </header>
    <!-- End Header -->

    <!-- ======= Hero Section ======= -->
    <section id="hero">
      <div class="hero-container">
        <table
          class="table table-striped"
          style="color: white;"
          id="tableSchemas"
        >
          <tr>
            <th>Ficheiros Schema.json</th>
            <th>Editar</th>
            <th>Remover</th>
          </tr>
        </table>
        <a
          href="http://localhost:8081/createfile.html"
          onclick=""
          class="btn-get-started"
          >Criar Novo JSON Schema</a
        >
      </div>
    </section>
    <!-- End Hero Section -->

    <footer id="footer">
      <div class="footer-top">
        <div class="container"></div>
      </div>

      <div class="container">
        <div class="copyright">
          &copy; Copyright <strong>Regna</strong>. All Rights Reserved
        </div>
        <div class="credits">
          Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
        </div>
      </div>
    </footer>

    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="assets/vendor/counterup/counterup.min.js"></script>
    <script src="assets/vendor/wow/wow.min.js"></script>
    <script src="assets/vendor/waypoints/jquery.waypoints.min.js"></script>
    <script src="assets/vendor/superfish/superfish.min.js"></script>
    <script src="assets/vendor/hoverIntent/hoverIntent.js"></script>
    <script src="assets/vendor/venobox/venobox.min.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
